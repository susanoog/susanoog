
# 未踏事業中間報告メモ

- 2017/11/4 (fri)
- Hiroki SHIROKURA (slank.dev@gmail.com)

アドバイスをいただいた肩が行ったことを一字一句書き下しているわけではなく,
聞いた内容を私が解釈して文にしていますので,間違っている可能性があります.

## 性能計測について

計測するべきもの

- D2のオーバヘッド
	- 各Rx/Txごとに何clock余分にかかっているか
	- Handoptimized DPDKとの比較
	- スレッドの最適化を行う期間にどれくらいの時間がかかるか
	  == スレッド最適化作業にかかる時間はどれくらいか

- アトミック変数やMPMCロックフリーに関しての性能を測る
- それぞれの処理にどれくらいのレイテンシがかかるかを見積らなくてはいけん
- DCA: Direct Cache Accessについて理解しておきたい
	- 名前はたしかDDIOって名前になった
	- cache stashing
		- 通常、DMA はデバイス ⇔ メモリ (DRAM) 間。
		- 超低遅延が欲しい場合、一度DRAMにだけ書かれるのが残念。
		- DRAM write+read遅延がかさんでしまう。
		- できたら、デバイスからキャッシュに持って来たい。
		- それが cache stashing。
	- ARM は以前からサポートしてるらしい。
	- x86では, Xeon E5 (Sandy Bridge, 2012/3 ～)、
		Xeon E7 v2 (Ivy Bridge, 2014/2 ～) がサポート。
		Intel Data Direct I/O (DDIO) Technology

## 調べるべき内容について

- 発表の見せ方
	- 応用例: DCN(DataCenterNetwork)の上流NW
	- 応用例: vCPEなど (DHCP/NAT)
		- http://jpn.nec.com/press/201704/20170411_02.html
		- NATとかDHCPとか
		- どっちも環境持つから大変そう…
		- NFVのサービスチェインでよく現れる
	- 性能などは重要だけど, 生DPDKと比較すると辛い
	- HPNFV: VMでのNFVと比較する
	- susanowの理想状態を示せるシナリオを考える
- 動的の意味についてしっかり定義しないと成果報告きついかも

NFVに関して

- クラウド会社(Google,MS,Facebook,etc)がなにをやっているか
- そこからどのような技術が必要かをキャッチしないといけない
- どういうネットワーク操作をできるようにするとよいのか.
- どういうネットワーク機能が提供できるとよいのか
- どのくらいの性能をどのくらいのコストで捌けるようになればいいのか.

## 対外的アウトプットの方法に関して

キーポイント

- ターゲットユーザはなにか
- キーアイテムはなにか
- なにが新しいのか

D2を説明

- ソフトウェアスタックアーキテクチャ図がほしかった (図1)
- D2がDPDKのスレッドAPIのラッパーであることの説明はほしかった
- 性能面での説明がほしかった
- D2はスレッドの追加以外の作業ができるのか
- スレッドの追加だけでなく, 減らす方までやれれは自動チューニングといえる
- そうでないなら自動チューニングとはいえないのでは




